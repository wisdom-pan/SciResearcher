# SciResearcher

> åŸºäº smolagents + Qwen3 + MinerU çš„ç§‘ç ”æ–‡çŒ®æ·±åº¦ç†è§£æ¡†æ¶

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/)
[![smolagents](https://img.shields.io/badge/smolagents-1.0+-green.svg)](https://github.com/huggingface/smolagents)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## é¡¹ç›®ç®€ä»‹

SciResearcher æ˜¯é¦–ä¸ªåŸºäº **smolagents** + **Qwen3 ç³»åˆ—æ¨¡å‹** + **MinerU2.5** çš„ç§‘ç ”æ–‡çŒ®ç ”ç©¶æ¡†æ¶ï¼Œä¸“ä¸ºç§‘ç ”å·¥ä½œè€…è®¾è®¡çš„è½»é‡ã€å¼€æºã€å¯éªŒè¯çš„ AI åŠ©æ‰‹ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

- âœ… **å®Œå…¨åŸºäº API**: æ‰€æœ‰åŠŸèƒ½é€šè¿‡ API è°ƒç”¨ï¼Œæ— éœ€æœ¬åœ°éƒ¨ç½²å¤§æ¨¡å‹
- âœ… **smolagents æ¡†æ¶**: ä½¿ç”¨ HuggingFace å®˜æ–¹ Multi-Agent æ¡†æ¶
- âœ… **Qwen3 å…¨å®¶æ¡¶**: Qwen3 æ¨ç† + Qwen3 Embedding + Qwen-VL è§†è§‰ç†è§£
- âœ… **MinerU è§£æ**: æ”¯æŒ PDF å¤šæ¨¡æ€è§£æï¼ˆæ–‡å­—ã€å›¾è¡¨ã€å…¬å¼ï¼‰
- âœ… **å¯éªŒè¯è¾“å‡º**: å¼ºåˆ¶å¼•ç”¨ + ç½®ä¿¡åº¦è¯„åˆ†
- âœ… **Docker éƒ¨ç½²**: ä¸€é”®éƒ¨ç½²ï¼Œå¼€ç®±å³ç”¨

## æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SciResearcher                          â”‚
â”‚            åŸºäº smolagents çš„ Multi-Agent æ¡†æ¶               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     smolagents Agent                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ToolCalling   â”‚  â”‚  CodeAgent   â”‚  â”‚  LiteLLM     â”‚     â”‚
â”‚  â”‚   Agent      â”‚  â”‚              â”‚  â”‚   Model      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å·¥å…·é›† (Tools)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ @tool parse_pdf_with_mineru     # PDF è§£æ         â”‚    â”‚
â”‚  â”‚ @tool index_documents            # æ–‡æœ¬ç´¢å¼•        â”‚    â”‚
â”‚  â”‚ @tool search_documents           # è¯­ä¹‰æœç´¢        â”‚    â”‚
â”‚  â”‚ @tool analyze_image              # å›¾åƒç†è§£        â”‚    â”‚
â”‚  â”‚ @tool process_research_paper     # ç»¼åˆå¤„ç†        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API æœåŠ¡å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Qwen3      â”‚  â”‚   Qwen3      â”‚  â”‚   Qwen-VL    â”‚     â”‚
â”‚  â”‚   (æ¨ç†)      â”‚  â”‚ (Embedding)  â”‚  â”‚   (è§†è§‰)      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  MinerU API  â”‚  â”‚    FAISS     â”‚                       â”‚
â”‚  â”‚ (PDFè§£æ)     â”‚  â”‚  (å‘é‡åº“)     â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-repo/SciResearcher.git
cd SciResearcher

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ DASHSCOPE_API_KEY

# 3. ä½¿ç”¨ Docker Compose å¯åŠ¨
docker-compose up -d

# 4. è¿›å…¥å®¹å™¨
docker exec -it sciresearcher bash

# 5. è¿è¡Œ
python main.py --help
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å®‰è£…

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n sciresearcher python=3.10
conda activate sciresearcher

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ DASHSCOPE_API_KEY

# 4. è¿è¡Œ
python main.py --help
```

## ä½¿ç”¨ç¤ºä¾‹

### 1. å¤„ç† PDF æ–‡ä»¶

```bash
python main.py --pdf paper.pdf
```

**åŠŸèƒ½**:
- ä½¿ç”¨ MinerU API è§£æ PDF
- æå–æ–‡å­—ã€å›¾ç‰‡ã€è¡¨æ ¼ã€å…¬å¼
- è‡ªåŠ¨åˆ†å—å¹¶å»ºç«‹å‘é‡ç´¢å¼•

### 2. å›ç­”ç§‘ç ”é—®é¢˜

```bash
python main.py --question "Transformerç›¸æ¯”LSTMæœ‰ä»€ä¹ˆä¼˜åŠ¿?"
```

**åŠŸèƒ½**:
- è¯­ä¹‰æ£€ç´¢ç›¸å…³æ–‡çŒ®å†…å®¹
- åŸºäºè¯æ®ç”Ÿæˆç­”æ¡ˆ
- å¸¦å¼•ç”¨å’Œç½®ä¿¡åº¦è¯„åˆ†

### 3. å®Œæ•´åˆ†ææµç¨‹

```bash
python main.py \
  --pdf paper.pdf \
  --question "è¿™ç¯‡è®ºæ–‡çš„ä¸»è¦è´¡çŒ®æ˜¯ä»€ä¹ˆ?"
```

**åŠŸèƒ½**:
- å¤„ç† PDF + å›ç­”é—®é¢˜
- ç”Ÿæˆå®Œæ•´ç ”ç©¶æŠ¥å‘Š
- åŒ…å«å›¾è¡¨åˆ†æï¼ˆå¦‚æœ‰ï¼‰

### 4. åˆ†æå›¾è¡¨

```bash
python main.py \
  --images figure1.png figure2.png \
  --question "è¿™äº›å›¾è¡¨è¯´æ˜äº†ä»€ä¹ˆ?"
```

### 5. äº¤äº’æ¨¡å¼

```bash
python main.py
```

è¿›å…¥äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢ã€‚

## API é…ç½®

### è·å–é˜¿é‡Œäº‘ç™¾ç‚¼ API å¯†é’¥

1. è®¿é—® [é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°](https://dashscope.console.aliyun.com/apiKey)
2. åˆ›å»º API Key
3. å°†å¯†é’¥å¡«å…¥ `.env` æ–‡ä»¶çš„ `DASHSCOPE_API_KEY`

### æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ç±»å‹ | æ¨¡å‹åç§° | ç”¨é€” |
|---------|---------|------|
| **æ¨ç†æ¨¡å‹** | qwen-plus | ä»»åŠ¡è§„åˆ’ã€æ¨ç†ç”Ÿæˆ |
| | qwen-turbo | å¿«é€Ÿæ¨ç† |
| | qwen-max | æœ€å¼ºæ¨ç†èƒ½åŠ› |
| **å‘é‡åŒ–** | text-embedding-v3 | Qwen3 Embedding |
| **è§†è§‰ç†è§£** | qwen-vl-max | å›¾è¡¨åˆ†æ |

### MinerU é…ç½®

**é€‰é¡¹ 1ï¼šä½¿ç”¨ MinerU APIï¼ˆæ¨èï¼‰**

åœ¨ `.env` ä¸­é…ç½®:
```bash
MINERU_API_URL=https://api.mineru.com/v1/parse
MINERU_API_KEY=your_key
```

**é€‰é¡¹ 2ï¼šä½¿ç”¨æœ¬åœ° MinerU**

ä¸é…ç½® `MINERU_API_URL`ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨æœ¬åœ° MinerU åº“ã€‚

## é¡¹ç›®ç»“æ„

```
SciResearcher/
â”œâ”€â”€ main.py                      # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ tools/
â”‚   â””â”€â”€ research_tools.py        # smolagents å·¥å…·é›†
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py             # é…ç½®åŠ è½½
â”‚   â””â”€â”€ config.yaml             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ pdfs/                   # PDF æ–‡ä»¶
â”‚   â”œâ”€â”€ processed/              # å¤„ç†åçš„æ•°æ®
â”‚   â”œâ”€â”€ vector_index/           # å‘é‡ç´¢å¼•
â”‚   â””â”€â”€ cache/                  # ç¼“å­˜
â”œâ”€â”€ Dockerfile                   # Docker é•œåƒ
â”œâ”€â”€ docker-compose.yml          # Docker Compose é…ç½®
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ README.md                   # æœ¬æ–‡æ¡£
```

## é«˜çº§åŠŸèƒ½

### å¤šæ–‡æ¡£ç»¼åˆåˆ†æ

```python
from main import SciResearcher

researcher = SciResearcher(model_name="qwen-plus")

result = researcher.multi_paper_synthesis(
    pdf_paths=["paper1.pdf", "paper2.pdf", "paper3.pdf"],
    research_question="Transformeråœ¨NLPé¢†åŸŸçš„åº”ç”¨è¿›å±•?"
)

print(result)
```

### è‡ªå®šä¹‰ Agent ç±»å‹

```bash
# ä½¿ç”¨ ToolCallingAgent (æ¨è)
python main.py --agent-type tool-calling

# ä½¿ç”¨ CodeAgent
python main.py --agent-type code
```

### é€‰æ‹©æ¨¡å‹

```bash
# ä½¿ç”¨ qwen-plus (å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬)
python main.py --model qwen-plus

# ä½¿ç”¨ qwen-max (æœ€å¼ºæ€§èƒ½)
python main.py --model qwen-max

# ä½¿ç”¨ qwen-turbo (æœ€å¿«é€Ÿåº¦)
python main.py --model qwen-turbo
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

åœ¨ `tools/research_tools.py` ä¸­:

```python
from smolagents import tool

@tool
def your_new_tool(param: str) -> str:
    """
    Tool description here.

    Args:
        param: Parameter description

    Returns:
        Result description
    """
    # Your implementation
    return result
```

ç„¶ååœ¨ `main.py` ä¸­æ³¨å†Œ:

```python
from tools.research_tools import your_new_tool

self.tools = [
    # ... existing tools
    your_new_tool
]
```

### è¿è¡Œæµ‹è¯•

```bash
pytest tests/
```

## æ€§èƒ½ä¼˜åŒ–

### å‘é‡æ£€ç´¢ä¼˜åŒ–

```yaml
# config/config.yaml
retrieval:
  top_k: 5          # æ£€ç´¢ç»“æœæ•°é‡
  chunk_size: 500   # æ–‡æœ¬å—å¤§å°
  chunk_overlap: 50 # é‡å å¤§å°
```

### ç¼“å­˜é…ç½®

```yaml
cache:
  enabled: true
  dir: "./data/cache"
  ttl: 86400  # ç¼“å­˜æ—¶é—´(ç§’)
```

## å¸¸è§é—®é¢˜

### Q: MinerU API è°ƒç”¨å¤±è´¥æ€ä¹ˆåŠ?

A: ç³»ç»Ÿä¼šè‡ªåŠ¨å›é€€åˆ°æœ¬åœ° MinerU åº“ã€‚ç¡®ä¿å·²å®‰è£…:
```bash
pip install "magic-pdf[full]==0.7.0b1" --extra-index-url https://wheels.myhloli.com
```

### Q: å¦‚ä½•æé«˜å›ç­”è´¨é‡?

A:
1. ä½¿ç”¨æ›´å¼ºçš„æ¨¡å‹ (qwen-max)
2. å¢åŠ æ£€ç´¢ç»“æœæ•°é‡ (top_k)
3. ä¼˜åŒ–æ–‡æœ¬åˆ†å—å¤§å°

### Q: æ”¯æŒå“ªäº› PDF æ ¼å¼?

A: æ”¯æŒæ ‡å‡† PDF æ ¼å¼ï¼ŒåŒ…æ‹¬:
- æ–‡æœ¬å‹ PDF
- æ‰«æå‹ PDF (éœ€ OCR)
- åŒ…å«å›¾è¡¨ã€å…¬å¼çš„å­¦æœ¯è®ºæ–‡

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®! è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md)

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE)

## è‡´è°¢

- [smolagents](https://github.com/huggingface/smolagents) - HuggingFace çš„ Multi-Agent æ¡†æ¶
- [Qwen](https://github.com/QwenLM/Qwen) - é˜¿é‡Œäº‘é€šä¹‰åƒé—®ç³»åˆ—æ¨¡å‹
- [MinerU](https://github.com/opendatalab/MinerU) - PDF è§£æå·¥å…·

## è”ç³»æ–¹å¼

- Issues: [GitHub Issues](https://github.com/your-repo/SciResearcher/issues)
- Email: your-email@example.com

---

**ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼**
